---
import { Image } from "astro:assets"
import Button from "../ui/Button.astro"

const {
    logo,
    navItems = [],
    cta = null,
} = Astro.props
---

<header class="max-w-6xl mx-auto py-6 flex justify-between items-center">

    <div class="flex-1">
        <a href="/#">
            <Image
            src={logo.src}
            alt={logo.alt}
            />
        </a>
    </div>

  
    <nav class="flex justify-center items-center gap-10 max-md:hidden flex-1">
        {
            navItems.map((item:any) => (
                <Button 
                href={item.href} 
                label={item.label} 
                classes="text-neutral font-light uppercase hover:text-primary-orange"
                underlineAnimation="true"
                data-activeLink 
                />
            ))
        }
    </nav>


    <div class="flex-1 flex justify-end ">
        <Button
        href={cta.href}
        label={cta.label}
        iconPosition="left"
        classes="rounded-full px-6 py-3 flex justify-center items-center gap-2 bg-neutral text-neutral2 max-md:hidden hover:bg-neutral/90"
        >
            <Image 
            src={cta.icon.src}
            alt={"Call"}
            slot={"icon"}
            />
        </Button>
    </div>

    <div class="md:hidden">

        <button id="menu-btn" class="text-white">
            <Image
                id="menu-icon"
                src={cta?.menuIcon?.src}
                alt="menu"
                class="w-10 h-10"
            />
            <Image
                id="close-icon"
                src={cta?.crossIcon?.src}
                alt="close"
                class="hidden w-6 h-6"
            />
        </button>

        <nav id="mobile-menu" class="hidden bg-bg z-50 left-0 w-full h-screen absolute px-5 mt-2 transform transition-transform translate-y-full duration-500">
            <ul class=" mt-10 space-y-3">

                {
                    navItems.map((item:any) => (
                        <a href={item.href} class="group uppercase">
                            <li class="py-3">
                                {item.label}
                            </li>
                        </a>
                    ))
                }

                <li class="mt-5">
                    <Button
                        href={cta.href}
                        label={cta.label}
                        iconPosition="left"
                        classes="rounded-full w-full py-3 flex justify-center items-center gap-2 bg-neutral text-neutral2 hover:bg-neutral/90"
                    >
                        <Image 
                        src={cta.icon.src}
                        alt={"Call"}
                        slot={"icon"}
                        />
                    </Button>
                </li>

            </ul>
            
            
        </nav>

    </div>

</header>

<script is:inline>
  const header = document.currentScript.closest("header");

  const menuBtn = header.querySelector("[data-menu-btn]");
  const mobileMenu = header.querySelector("[data-mobile-menu]");
  const menuIcon = header.querySelector("[data-menu-icon]");
  const closeIcon = header.querySelector("[data-close-icon]");

  menuBtn?.addEventListener("click", () => {
    const open = mobileMenu.classList.contains("hidden");

    mobileMenu.classList.toggle("hidden", !open);
    mobileMenu.classList.toggle("translate-y-full", !open);
    menuIcon?.classList.toggle("hidden", open);
    closeIcon?.classList.toggle("hidden", !open);

    document.body.classList.toggle("overflow-hidden", open);
  });
</script>